@inject HttpClient _client;

<style>
    #speakerImg{
        width: 30px;
        height: 30px;
    }
</style>

<button disabled="@disabled" onclick="document.getElementById('@audioId').play()">
    <img id="speakerImg" src="/Resources/Images/speaker-filled-audio-tool_59284.png"/>
</button>
<audio id="@audioId" src="@SourceString"></audio>

@code {
    [Parameter]
    public int pokedexNumber { get; set; } = 0;

    [Parameter]
    public bool IsDisabled { get; set; } = false;

    private string audioId { get; set; } = "sound";

    private bool disabled { get; set; } = false;

    private string SourceString { get; set; } = string.Empty;

    protected override void OnInitialized()
    {
        disabled = IsDisabled;
    }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        SourceString = $"/Resources/Cries/{pokedexNumber.ToString()}.mp3";
        audioId += pokedexNumber.ToString();
        StateHasChanged();
    }

    public void EnableButton()
    {
        disabled = false;
        StateHasChanged();
    }
}
