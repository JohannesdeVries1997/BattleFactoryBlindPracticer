@inject HttpClient _client
@using Newtonsoft.Json
@using BattleFactoryBlindPracticer.Model

<ul>
    <li><GuessComponent @ref=@Move1 IsGuessable=@IsGuessable OptionList=@AllMoves GuessString=@Moves[0]></GuessComponent></li>
    <li><GuessComponent @ref=@Move2 IsGuessable=@IsGuessable OptionList=@AllMoves GuessString=@Moves[1]></GuessComponent></li>
    <li><GuessComponent @ref=@Move3 IsGuessable=@IsGuessable OptionList=@AllMoves GuessString=@Moves[2]></GuessComponent></li>
    <li><GuessComponent @ref=@Move4 IsGuessable=@IsGuessable OptionList=@AllMoves GuessString=@Moves[3]></GuessComponent></li>
</ul>

<button @onclick="ConfirmClick">Confirm</button>

@code {
    [Parameter]
    public bool IsGuessable { get; set; } = false;

    [Parameter]
    public string[] Moves { get; set; } = { "None", "None", "None", "None" };

    private List<string> AllMoves = new();

    private GuessComponent Move1 = new();
    private GuessComponent Move2 = new();
    private GuessComponent Move3 = new();
    private GuessComponent Move4 = new();

    private void ConfirmClick()
    {
        Move1.HandleGuessCheck();
        Move2.HandleGuessCheck();
        Move3.HandleGuessCheck();
        Move4.HandleGuessCheck();
    }

    public void ResetComponent()
    {
        Move1.ResetComponent();
        Move2.ResetComponent();
        Move3.ResetComponent();
        Move4.ResetComponent();
    }

    protected override async Task OnInitializedAsync()
    {
        AllMoves = await DataGetter.GetAllMoves(_client);
    }
}
